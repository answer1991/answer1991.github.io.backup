"use strict";angular.module("answer1991.github.io",["ngAnimate","ngAria","ngCookies","ngMessages","ngResource","ngRoute","ngSanitize","ngTouch","ui.router","ngMarkdown","answer1991.github.io.core","answer1991.github.io.common","answer1991.github.io.pages","answer1991.github.io.tpls"]).config(["$urlRouterProvider",function(a){a.when("","/"),a.when("/","/")}]),angular.module("answer1991.github.io.core",["answer1991.github.io.core.remote"]),angular.module("answer1991.github.io.core.remote",[]).provider("httpWrapper",function(){var a="";this.setUrl=function(b){a=b},this.$get=["$http","$q",function(b,c){return{getBaseUrl:function(){return a},get:function(d,e){return b({method:"GET",url:a+d,params:e}).then(function(a){return a.data},function(a){return a.data?c.reject(a.data):c.reject("query error, url: "+d+", status code : "+a.status)})},post:function(d,e,f){return b({method:"POST",url:a+d,data:f,headers:{"Content-Type":"application/json"},params:e}).then(function(a){return a.data},function(a){return a.data?c.reject(a.data):c.reject("post error, url: "+d+", status code : "+a.status)})}}}]}),angular.module("answer1991.github.io.common",["answer1991.github.io.common.layout"]),angular.module("answer1991.github.io.common.layout",["answer1991.github.io.common.layout.default"]).config(["$stateProvider",function(a){a.state("layout",{"abstract":!0,templateUrl:"modules/common/layout/layout.html"})}]),angular.module("answer1991.github.io.common.layout.default",[]).config(["$stateProvider",function(a){a.state("layout.default",{"abstract":!0,templateUrl:"modules/common/layout/default/default.html",resolve:{directories:["httpWrapper",function(a){return a.get("_posts/index.json").then(function(a){return a.directories})}],pathTitleMap:["httpWrapper",function(a){return a.get("_posts/config.json").then(function(a){return a.pathTitleMap||{}},function(){return{}})}],navs:["directories","pathTitleMap",function(a,b){return _.map(a,function(a){return{path:a,title:b[a]||a}})}],pageTitleMap:["httpWrapper",function(a){return a.get("_pages/config.json").then(function(a){return a.pathTitleMap||{}},function(){return{}})}],pages:["httpWrapper","pageTitleMap","pageService",function(a,b,c){return a.get("_pages/index.json").then(function(a){return a.files},function(){return[]}).then(function(a){return _.map(a,function(a){return c.formatPage(a,b)})})}]},controller:["$scope","navs","pages",function(a,b,c){a.navs=b,a.pages=c}]})}]),angular.module("answer1991.github.io.pages",["answer1991.github.io.pages.index","answer1991.github.io.pages.posts","answer1991.github.io.pages.page"]).config(["$stateProvider",function(a){a.state("pages",{parent:"layout.default",template:"<div ui-view></div>"})}]),angular.module("answer1991.github.io.pages.index",[]).config(["$stateProvider",function(a){a.state("pages.index",{url:"/",templateUrl:"modules/pages/index/index.html"})}]),angular.module("answer1991.github.io.pages.posts",[]).config(["$stateProvider",function(a){a.state("pages.posts",{url:"/{path}","abstract":!0,template:"<div ui-view></div>"})}]).factory("postService",[function(){var a=/(\d{4}-\d{2}-\d{2})-(.+)\.(\w*)/,b={formatPost:function(b){if(a.test(b)){var c=RegExp.$1,d=RegExp.$2;return{date:new Date(c),title:d,file:b}}}};return b}]),angular.module("answer1991.github.io.pages.posts").config(["$stateProvider",function(a){a.state("pages.posts.list",{url:"/list",templateUrl:"modules/pages/posts/list/list.html",resolve:{posts:["httpWrapper","$stateParams","postService",function(a,b,c){return a.get("_posts/"+b.path+"/index.json").then(function(a){return a.files}).then(function(a){var b=_.compact(_.map(a,function(a){return c.formatPost(a)}));return b.sort(function(a,b){return b.date.getTime()-a.date.getTime()}),b})}],title:["pathTitleMap","$stateParams",function(a,b){return a[b.path]||b.path}]},controller:["$scope","posts","title",function(a,b,c){a.title=c,a.posts=b}]})}]),angular.module("answer1991.github.io.pages.posts").config(["$stateProvider",function(a){a.state("pages.posts.view",{url:"/view/{file}",templateUrl:"modules/pages/posts/view/view.html",resolve:{post:["$stateParams","postService",function(a,b){return b.formatPost(a.file)}],content:["httpWrapper","$stateParams",function(a,b){return a.get("_posts/"+b.path+"/"+b.file).then(function(a){return a})}]},controller:["$scope","post","content",function(a,b,c){a.post=b,a.content=c}]})}]),angular.module("answer1991.github.io.pages.page",[]).config(["$stateProvider",function(a){a.state("pages.page",{url:"/pages/{path}",templateUrl:"modules/pages/page/page.html",resolve:{page:["$stateParams","pageService","pageTitleMap",function(a,b,c){return b.formatPage(a.path,c)}],content:["httpWrapper","$stateParams",function(a,b){return a.get("_pages/"+b.path).then(function(a){return a})}]},controller:["$scope","content","page",function(a,b,c){a.page=c,a.content=b}]})}]).factory("pageService",[function(){var a=/(.+)\.(\w+)/,b={formatPage:function(b,c){var d=b;return a.test(b)&&(d=RegExp.$1),{path:b,title:c[d]||d}}};return b}]);